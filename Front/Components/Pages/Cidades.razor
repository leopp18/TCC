@page "/cidades"
@rendermode InteractiveServer

@using Blazorise

<PageTitle>Cidades</PageTitle>

<h1>Cidades</h1>

<div class="d-flex justify-content-end mb-3">
    <button class="btn btn-success" @onclick="ShowNewCityModal"><i class="bi bi-plus-circle"></i></button>
</div>

<Table Striped Bordered>
    <TableHeader ThemeContrast="ThemeContrast.Dark">
        <TableRow>
            <TableHeaderCell>#</TableHeaderCell>
            <TableHeaderCell>Nome</TableHeaderCell>
            <TableHeaderCell>Status</TableHeaderCell>
        </TableRow>
    </TableHeader>
    <TableBody>
        <TableRow>
            <TableRowHeader>1</TableRowHeader>
            <TableRowCell>São Paulo</TableRowCell>
            <TableRowCell>Ativo</TableRowCell>
        </TableRow>
        <TableRow>
            <TableRowHeader>2</TableRowHeader>
            <TableRowCell>Rio de Janeiro</TableRowCell>
            <TableRowCell>Inativo</TableRowCell>
        </TableRow>
        <TableRow>
            <TableRowHeader>3</TableRowHeader>
            <TableRowCell>Belo Horizonte</TableRowCell>
            <TableRowCell>Ativo</TableRowCell>
        </TableRow>
    </TableBody>
</Table>

<Modal @bind-Visible="showNewCityModal">
    <ModalBackdrop />
    <ModalContent>
        <ModalHeader>
            <ModalTitle>Nova Cidade</ModalTitle>
            <Button CloseButton @onclick="HideNewCityModal" />
        </ModalHeader>
        <ModalBody>
            <div class="form-group">
                <label for="nome">Nome</label>
                <input type="text" class="form-control" id="nome" @bind="newCity.Nome" />
            </div>
            <div class="form-group">
                <label for="status">Status</label>
                <select class="form-control" id="status" @bind="newCity.Situacao">
                    <option value="Ativo">Ativo</option>
                    <option value="Inativo">Inativo</option>
                </select>
            </div>
        </ModalBody>
        <ModalFooter>
            <Button Color="Color.Primary" @onclick="SaveNewCity">Salvar</Button>
            <Button Color="Color.Secondary" @onclick="HideNewCityModal">Cancelar</Button>
        </ModalFooter>
    </ModalContent>
</Modal>

<button class="btn btn-primary btn-sm"><i class="bi bi-pencil"></i></button>
<button class="btn btn-danger btn-sm"><i class="bi bi-trash"></i></button>

@code {
    private bool showNewCityModal = false;

    private Cidade newCity = new Cidade();

    private Task ShowNewCityModal()
    {
        showNewCityModal = true;
        return Task.CompletedTask;
    }

    private Task HideNewCityModal()
    {
        showNewCityModal = false;
        return Task.CompletedTask;
    }

    private void SaveNewCity()
    {
        // Lógica para salvar a nova cidade
        showNewCityModal = false;
    }

    private void OnEditClicked()
    {
        // Lógica para editar
    }

    private void OnDeleteClicked()
    {
        // Lógica para deletar
    }

    public class Cidade
    {
        public string Nome { get; set; }
        public string Situacao { get; set; }
    }
}
